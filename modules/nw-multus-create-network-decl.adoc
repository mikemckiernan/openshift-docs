// Module included in the following assemblies:
//
// * networking/multiple_networks/networking-gitops.adoc

[id="nw-multus-create-network-decl_{context}"]
= Create an additional network declaratively

:net-def-name: network-bridge-static

To create an additional network declaratively in support of GitOps, complete the following steps.

.Prerequisites

* Install the OpenShift CLI (`oc`).

* Log in as a user with `cluster-admin` privileges.

.Procedure

. Create a file, such as `{net-def-name}.yaml`, with contents that are similar to the following example:
+
[source,yaml,subs="attributes+"]
----
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: {net-def-name} <.>
spec:
  config: |- <.>
    {
      "cniVersion": "0.4.0",
      "name": "{net-def-name}",
      "type": "bridge",
      "bridge": "mynet1",
      "ipam": { <.>
        "type": "static",
        "addresses":[
          {
            "address": "192.168.12.99/24",
            "gateway": "192.168.12.1"
          },
          {
            "address": "3ffe:ffff:0:01ff::1/64",
            "gateway": "3ffe:ffff:0::1"
          }
        ],
        "routes": [
          { "dst": "0.0.0.0/0" },
          { "dst": "192.168.0.0/16", "gw": "192.168.12.1" }
        ]
      }
    }
----
<.> Specify a name for the network attachment definition. This is the name that a pod specification must reference in the `k8s.v1.cni.cncf.io/networks` annotation.
<.> Specify the configuration for the additional network attachment definition.
<.> Specify the configuration for the IP address management (IPAM) CNI plug-in. The plug-in manages IP address assignment for the network attachment definition.

. Apply the manifest:
+
[source,terminal,subs="attributes+"]
----
$ oc create -n <namespace> -f <{net-def-name}.yaml>
----
+
.Example output
[source,terminal,subs="attributes+"]
----
networkattachementdefinition.k8s.cni.cncf.io/{net-def-name} created
----

.Verification steps

* Confirm that the network attachment definition exists by running the following command. Replace `<namespace>` with the namespace that you specified when you applied the manifest.
+
[source,terminal,subs="attributes+"]
----
NAME                   AGE
{net-def-name}  14m
----
